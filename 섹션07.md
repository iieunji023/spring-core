## ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì… ì‹œì‘í•˜ê¸°

- ì§€ê¸ˆê¹Œì§€ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•  ë•ŒëŠ” ìë°” ì½”ë“œì˜ `@Bean`ì´ë‚˜ XMLì˜ `<bean>`ì„ í†µí•´ ì„¤ì • ì •ë³´ì— ì§ì ‘ ë“±ë¡í•  ìŠ¤í”„ë§ ë¹ˆì„ ë‚˜ì—´í–ˆë‹¤
- ìŠ¤í”„ë§ ë¹ˆì´ ìˆ˜ë°± ê°œê°€ ë˜ë©´ ì¼ì¼ì´ ë“±ë¡í•˜ê¸° ì–´ë ¤ìš¸ ë¿ ì•„ë‹ˆë¼ ì„¤ì • ì •ë³´ë„ ì»¤ë¦¬ê³  ëˆ„ë½í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤
- ê·¸ë˜ì„œ ìŠ¤í”„ë§ì€ ì„¤ì • ì •ë³´ê°€ ì—†ì–´ë„ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì´ë¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤
- ë˜ ì˜ì¡´ê´€ê³„ë„ ìë™ìœ¼ë¡œ ì£¼ì…í•˜ëŠ” `@Autowired`ë¼ëŠ” ê¸°ëŠ¥ë„ ì œê³µí•œë‹¤

ğŸ’¡ ì‹¤ì œ ì½”ë“œë¥¼ í†µí•´ **ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”**ê³¼ **ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…**ì— ëŒ€í•´ ì•Œì•„ë³´ë ¤ í•œë‹¤

> AutoAppConfig - ì„¤ì • ì •ë³´ 
> <br> - @Configuration 
> <br> -@ComponentScan

- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë¨¼ì € `@ComponentScan`ì„ ì„¤ì • ì •ë³´ì— ë¶™ì—¬ì£¼ë©´ ëœë‹¤
- ê¸°ì¡´ì˜ AppConfigì™€ ë‹¬ë¦¬ `@Bean`ìœ¼ë¡œ ë“±ë¡í•œ í´ë˜ìŠ¤ê°€ í•˜ë‚˜ë„ ì—†ìŒ

```
ğŸ’¡ ì°¸ê³ 
- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì„ ì‚¬ìš©í•˜ë©´ `@Configuration`ì´ ë¶™ì€ ì„¤ì • ì •ë³´ë„ ìë™ìœ¼ë¡œ ë“±ë¡ë˜ê¸° ë•Œë¬¸ì— AppConfig, TestConfig ë“± ì•ì„œ ë§Œë“¤ì–´ë‘ì—ˆë˜ ì„¤ì • ì •ë³´ë„ í•¨ê»˜ ë“±ë¡ë˜ê³ , ì‹¤í–‰ëœë‹¤
- ê·¸ë˜ì„œ excludeFiltersë¥¼ ì´ìš©í•´ì„œ ì„¤ì • ì •ë³´ëŠ” ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì—ì„œ ì œì™¸í–ˆë‹¤
(Configuration ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì–´ìˆëŠ” í´ë˜ìŠ¤)
- ë³´í†µ ì„¤ì • ì •ë³´ë¥¼ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì—ì„œ ì œì™¸í•˜ì§€ëŠ” ì•Šì§€ë§Œ, ê¸°ì¡´ ì˜ˆì œ ì½”ë“œë¥¼ ìµœëŒ€í•œ ë‚¨ê¸°ê³  ìœ ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©
```

ğŸ”¹ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”(`@ComponentScan`)ì€ ì´ë¦„ ê·¸ëŒ€ë¡œ `@Component` ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ìŠ¤ìº”í•´ì„œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œë‹¤<br>
ğŸ”¹ `@Component`ë¥¼ ë¶™ì—¬ì£¼ì

> MemoryMemberRepository, MemberServiceImpl, RateDiscountPolicy, OrderServiceImpl - ë¹ˆ ìë™ ë“±ë¡

<details>
      <summary>MemoryMemberRepository - @Compont</summary>

        @Component
        public class MemoryMemberRepository implements MemberRepository{}

</details>

<details>
      <summary>RateDiscountPolicy  - @Compont</summary>

        @Component
        public class RateDiscountPolicy implements DiscountPolicy {}

</details>

<details>
      <summary>MemberServiceImpl - @Compont, @Autowired</summary>

        @Component
        public class MemberServiceImpl implements MemberService{
        private final  MemberRepository memberRepository;

        @Autowired  //ac.getBean(MemberRepository.class)
        public MemberServiceImpl(MemberRepository memberRepository) {
            this.memberRepository = memberRepository;
            }
        }

- ì´ì „ì—ëŠ” AppConfigì—ì„œ @Beanì„ í†µí•´ ì˜ì¡´ê´€ê³„ë¥¼ ë‚´ê°€ ì£¼ì…í•´ì¤¬ë‹¤
- ê·¸ëŸ¬ë‚˜ AutoAppConfig í´ë˜ìŠ¤ ë‚´ì—ëŠ” ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ì½”ë“œê°€ ì—†ìŒ
- ë”°ë¼ì„œ ì´ì œ ì˜ì¡´ê´€ê³„ë¥¼ ìë™ìœ¼ë¡œ ì£¼ì…í•´ì¤˜ì•¼ í•¨ â‡’ `@Autowired` ì‚¬ìš©!!
    - `@Autowired`== `//ac.getBean(MemberRepository.class)`

</details>

<details>
      <summary>RateDiscountPolicy  - @Compont</summary>

        @Component
        public class OrderServiceImpl implements OrderService {
        private final MemberRepository memberRepository;
        private final DiscountPolicy discountPolicy;

        @Autowired
        public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
            this.memberRepository = memberRepository;
            this.discountPolicy = discountPolicy;
            }
        }

- @Autowiredë¥¼ ì‚¬ìš©í•˜ë©´ ìƒì„±ìì—ì„œ ì—¬ëŸ¬ ì˜ì¡´ê´€ê³„ë„ í•œë²ˆì— ì£¼ì…ë°›ì„ ìˆ˜ ìˆë‹¤

</details>

### í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±

> AutoAppConfigTest
- `AnnotationConfigApplicationContext`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ê¸°ì¡´ê³¼ ë™ì¼
- ì„¤ì • ì •ë³´ë¥¼ë¡œ `AutoAppConfig` í´ë˜ìŠ¤ ë„˜ê²¨ì¤Œ

```
ClassPathBeanDefinitionScanner - Identified candidate component class:
 .. RateDiscountPolicy.class
 .. MemberServiceImpl.class
 .. MemoryMemberRepository.class
 .. OrderServiceImpl.class
```
- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì´ ì˜ ë™ì‘í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤

### @ComponentScan

<img src="https://github.com/iieunji023/spring-core/blob/main/images/componentScan.png" width="500">

- `@ComponentScan`ì€ `@Component`ê°€ ë¶™ì€ ëª¨ë“  í´ë˜ìŠ¤ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œë‹¤
- ì´ë•Œ ìŠ¤í”„ë§ ë¹ˆì˜ ê¸°ë³¸ ì´ë¦„ì€ **í´ë˜ìŠ¤ëª…**ì„ ì‚¬ìš©í•˜ë˜ **ë§¨ ì•ê¸€ìë§Œ ì†Œë¬¸ìë¥¼ ì‚¬ìš©**
  - ë¹ˆ ì´ë¦„ ê¸°ë³¸ ì „ëµ: MemberServiceImpl í´ë˜ìŠ¤ â†’ memberServiceImpl
  - ë¹ˆ ì´ë¦„ ì§ì ‘ ì§€ì •: ë§Œì•½ ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ì„ ì§ì ‘ ì§€ì •í•˜ê³  ì‹¶ìœ¼ë©´ `@Component(â€memberService2â€)`ë¡œ ë¶€ì—¬

### @Autowired ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…

<img src="https://github.com/iieunji023/spring-core/blob/main/images/autowired.png" width="500">

- ìƒì„±ìì— `@Autowired`ë¥¼ ì§€ì •í•˜ë©´, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìë™ìœ¼ë¡œ í•´ë‹¹ ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ì•„ì„œ ì£¼ì…í•œë‹¤
- ì´ë•Œ ê¸°ë³¸ ì¡°íšŒ ì „ëµì€ **íƒ€ì…ì´ ê°™ì€ ë¹ˆì„ ì°¾ì•„ì„œ ì£¼ì…í•œë‹¤**
  - `getBean(MemberRepository.class)`ì™€ ë™ì¼í•˜ë‹¤ê³  ì´í•´í•˜ë©´ ëœë‹¤

<img src="https://github.com/iieunji023/spring-core/blob/main/images/autowired1.png" width="500">

- ìƒì„±ìì— íŒŒë¼ë¯¸í„°ê°€ ë§ì•„ë„ ë‹¤ ì°¾ì•„ì„œ ìë™ìœ¼ë¡œ ì£¼ì…íŒë‹¤

## íƒìƒ‰ ìœ„ì¹˜ì™€ ê¸°ë³¸ ìŠ¤ìº” ëŒ€ìƒ

### íƒìƒ‰í•  íŒ¨í‚¤ì§€ì˜ ì‹œì‘ ìœ„ì¹˜ ì§€ì •

- ëª¨ë“  ìë°” í¬ë˜ìŠ¤ë¥¼ ë‹¤ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”í•˜ë©´ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ë¯€ë¡œ í•„ìš”í•œ ìœ„ì¹˜ë¶€í„° íƒìƒ‰í•˜ë„ë¡ ì‹œì‘ ìœ„ì¹˜ë¥¼ ì •í•  ìˆ˜ ìˆë‹¤.

```
  @ComponentScan(
          basePackages = "hello.core.member", // ì–´ë””ì„œë¶€í„° íƒìƒ‰í• ì§€ ì§€ì •í•  ìˆ˜ ìˆìŒ
          basePackageClasses = AutoAppConfig.class,
          excludeFilters = @ComponentScan.Filter(type = FilterType.ANNOTATION, classes = Configuration.class)
  )
```

- `basePackages`
  - íƒìƒ‰í•  íŒ¨í‚¤ì§€ ì‹œì‘ ìœ„ì¹˜ ì§€ì •
  - ì´ íŒ¨í‚¤ì§€ë¥¼ í¬í•¨í•´ì„œ í•˜ìœ„ íŒ¨í‚¤ì§€ë¥¼ ëª¨ë‘ íƒìƒ‰
  - ì‹œì‘ ìœ„ì¹˜ë¥¼ ì—¬ëŸ¬ ê°œ ì§€ì •í•  ìˆ˜ ìˆìŒ
    - `basePackages = {"hello.core", "hello.service"}`
- `basePackageClasses`
  - ì§€ì •í•œ í´ë˜ìŠ¤ì˜ íŒ¨í‚¤ì§€ë¥¼ íƒìƒ‰ ì‹œì‘ ìœ„ì¹˜ë¡œ ì§€ì •
- ë§Œì•½ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ `@ComponentScan`ì´ ë¶™ì€ ì„¤ì • ì •ë³´ í´ë˜ìŠ¤ì˜ íŒ¨í‚¤ì§€ê°€ ì‹œì‘ ìœ„ì¹˜ê°€ ëœë‹¤

> ê¶Œì¥í•˜ëŠ” ë°©ë²•

- íŒ¨í‚¤ì§€ ìœ„ì¹˜ë¥¼ ì§€ì •í•˜ì§€ ì•Šê³ , **ì„¤ì • ì •ë³´ í´ë˜ìŠ¤ì˜ ìœ„ì¹˜ë¥¼ í”„ë¡œì íŠ¸ ìµœìƒë‹¨**ì— ë‘ëŠ” ê²ƒì´ë‹¤.

ì•„ë˜ì™€ ê°™ì€ í”„ë¡œì íŠ¸ êµ¬ì¡°ê°€ ìˆë‹¤ë©´

ğŸ”¹ `com.hello`

ğŸ”¹ `com.hello.service`

ğŸ”¹ `com.hello.repository`

- `com.hello` â†’ í”„ë¡œì íŠ¸ ì‹œì‘ ë£¨íŠ¸ì— AppConfig ê°™ì€ ë©”ì¸ ì„¤ì • ì •ë³´ë¥¼ ë‘ê³ , `@ComponentScan` ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì´ê³ , `basePackages` ì§€ì •ì€ ìƒëµí•˜ëŠ” ë°©ì‹ì„ ê¶Œì¥
- ì´ë ‡ê²Œ í•˜ë©´ `com.hello` ë¥¼ í¬í•¨í•œ í•˜ìœ„ëŠ” ëª¨ë‘ ìë™ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì´ ë¨
- ë˜, í”„ë¡œì íŠ¸ ë©”ì¸ ì„¤ì • ì •ë³´ëŠ” í”„ë¡œì íŠ¸ë¥¼ ëŒ€í‘œí•˜ëŠ” ì •ë³´ì´ê¸° ë•Œë¬¸ì— í”„ë¡œì íŠ¸ ì‹œì‘ ë£¨íŠ¸ ìœ„ì¹˜ì— ë‘ëŠ” ê²ƒì´ ì¢‹ìŒ

```
ğŸ’¡ ì°¸ê³ 
- ìŠ¤í”„ë§ë¶€íŠ¸ ì‚¬ìš©ì‹œ ìŠ¤í”„ë§ë¶€íŠ¸ ëŒ€í‘œ ì‹œì‘ ì •ë³´ì¸ `@SpringBootApplication`ë¥¼ ì´ í”„ë¡œì íŠ¸ ì‹œì‘ ë£¨íŠ¸ ìœ„ì¹˜ì— ë‘ëŠ” ê²ƒì´ ê´€ë¡€
- ì´ ì„¤ì • ì•ˆì— `@ComponentScan`ì´ ë“¤ì–´ìˆìŒ!
```

### ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ê¸°ë³¸ ëŒ€ìƒ

ğŸ’¡ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì€ @Component ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ìŒê³¼ ê°™ì€ ë‚´ìš©ë„ ëŒ€ìƒì— í¬í•¨ëœë‹¤
- `@Component` ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì—ì„œ ì‚¬ìš©
- `@Controller` ìŠ¤í”„ë§ MVC ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì‚¬ìš©
- `@Service` ìŠ¤í”„ë§ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ì„œ ì‚¬ìš©
- `@Repository` ìŠ¤í”„ë§ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µì—ì„œ ì‚¬ìš©
  - JPA, JDBC, â€¦
- `@Configuration` ìŠ¤í”„ë§ ì„¤ì • ì •ë³´ì—ì„œ ì‚¬ìš©

```
ğŸ’¡ ì°¸ê³ 
- ì–´ë…¸í…Œì´ì…˜ì—ëŠ” ìƒì†ê´€ê³„ê°€ ì—†ë‹¤
- ì–´ë…¸í…Œì´ì…˜ì´ íŠ¹ì • ì–´ë…¸í…Œì´ì…˜ì„ ë“¤ê³  ìˆëŠ” ê±³ì„ ì¸ì‹í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ìë°”ê°€ ì•„ë‹ˆë¼ ìŠ¤í”„ë§ì´ ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤
```

ğŸ’¡ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ìš©ë„ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ìŒ ì–´ë…¸í…Œì´ì…˜ì´ ìˆìœ¼ë©´ ìŠ¤í”„ë§ì€ ë¶€ê°€ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤
- `@Controller` ìŠ¤í”„ë§ MVC ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì¸ì‹
- `@Repository` ìŠ¤í”„ë§ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µìœ¼ë¡œ ì¸ì‹í•˜ê³ , ë°ì´í„° ê³„ì¸µì˜ ì˜ˆì™¸ë¥¼ ìŠ¤í”„ë§ ì˜ˆì™¸ë¡œ ë³€í™˜
- `@Configuration` ìŠ¤í”„ë§ ì„¤ì • ì •ë³´ë¥¼ ì¸ì‹í•˜ê³ , ìŠ¤í”„ë§ ë¹ˆì´ ì‹±ê¸€í†¤ì„ ìœ ì§€í•˜ë„ë¡ ì¶”ê°€ ì²˜ë¦¬
- `@Service` íŠ¹ë³„í•œ ì²˜ë¦¬ëŠ” í•˜ì§€ ì•Šê³ , ê°œë°œìë“¤ì´ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì—¬ê¸° ìˆêµ¬ë‚˜ ë¼ê³  ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì¸µì„ ì¸ì‹í•˜ëŠ”ë° ë„ì›€ë¨

## í•„í„°
- `includeFilters`ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì„ ì¶”ê°€ë¡œ ì§€ì •í•œë‹¤
- `excludeFilters` ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì—ì„œ ì œì™¸í•  ëŒ€ìƒì„ ì§€ì •í•œë‹¤

ğŸ”» ì‹¤ìŠµ êµ¬ì¡°
<img src="https://github.com/iieunji023/spring-core/blob/main/images/í•„í„°_ì‹¤ìŠµêµ¬ì¡°.png" width="500">

### í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±

> ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì— ì¶”ê°€í•  ì–´ë…¸í…Œì´ì…˜ - MyIncludeComponent

> ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì— ì œì™¸í•  ì–´ë…¸í…Œì´ì…˜ - MyExcludeComponent

> ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì— ì¶”ê°€í•  í´ë˜ìŠ¤ - BeanA

> ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì— ì œì™¸í•  í´ë˜ìŠ¤ - BeanB

> ìœ„ì—ì„œ ìƒì„±í•œ ì–´ë…¸í…Œì´ì…˜ê³¼ í´ë˜ìŠ¤ë¥¼ ì´ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì§„í–‰ - ComponentFilterAppConfigTest
- `includeFilters`ì— `MyIncludeComponent` ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•´ì„œ BeanAê°€ ìŠ¤í”„ë§ ë¹ˆì— ë“±ë¡ëœë‹¤
- `excludeFilters`ì— `MyExcludeComponent` ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•´ì„œ BeanBëŠ” ìŠ¤í”„ë§ ë¹ˆì— ë“±ë¡ë˜ì§€ ì•ŠëŠ”ë‹¤

### FilterType ì˜µì…˜

- ANNOTATION: ê¸°ë³¸ê°’, ì• ë…¸í…Œì´ì…˜ì„ ì¸ì‹í•´ì„œ ë™ì‘í•œë‹¤
  - ex) `org.example.SomeAnnotation`
- ASSIGNABLE_TYPE: ì§€ì •í•œ íƒ€ì…ê³¼ ìì‹ íƒ€ì…ì„ ì¸ì‹í•´ì„œ ë™ì‘í•œë‹¤
  - ex) `org.example.SomeClass`
- ASPECTJ: AspectJ íŒ¨í„´ ì‚¬ìš©
  - ex) `org.example..*Service+`
- REGEX: ì •ê·œ í‘œí˜„ì‹
  - ex) `org\.example\.Default.*`
- CUSTOM: `TypeFilter`ì´ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì„œ ì²˜ë¦¬
- ex) `org.example.MyTypeFilter`

## ì¤‘ë³µ ë“±ë¡ê³¼ ì¶©ëŒ

- ìë™ ë¹ˆ ë“±ë¡ vs ìë™ ë¹ˆ ë“±ë¡
- ìˆ˜ë™ ë¹ˆ ë“±ë¡ vs ìë™ ë¹ˆ ë“±ë¡

> ìë™ ë¹ˆ ë“±ë¡ vs ìë™ ë¹ˆ ë“±ë¡

- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì— ì˜í•´ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆì´ ë“±ë¡ë˜ëŠ”ë° ê·¸ ì´ë¦„ì´ ê°™ì€ ê²½ìš° ìŠ¤í”„ë§ì€ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚´
  - `ConflictingBeanDefinitionException` ì˜ˆì™¸ ë°œìƒ

> ìˆ˜ë™ ë¹ˆ ë“±ë¡ vs ìë™ ë¹ˆ ë“±ë¡

ğŸ”» @Componentë¥¼ í†µí•´ MemoryMemberRepository ìë™ ë¹ˆ ë“±ë¡
- ì´ ê²½ìš° ìˆ˜ë™ ë¹ˆ ë“±ë¡ì´ ìš°ì„ ê¶Œì„ ê°€ì§„ë‹¤
- ìˆ˜ë™ ë¹ˆì´ ìë™ ë¹ˆì„ ì˜¤ë²„ë¼ì´ë”©

ğŸ”» ë¡œê·¸

```
Overriding bean definition for bean 'memoryMemberRepository' with a different 
definition: replacing
```
- ì´ ê²½ìš° ì¡ê¸° ì–´ë ¤ìš´ ë²„ê·¸ê°€ ë§Œë“¤ì–´ì§„ë‹¤
- ê·¸ë˜ì„œ ìµœê·¼ ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” ìˆ˜ë™ ë¹ˆ ë“±ë¡ê³¼ ìë™ ë¹ˆ ë“±ë¡ì´ ì¶©ëŒë‚˜ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë„ë¡ ê¸°ë³¸ ê°’ì„ ë°”ê¾¸ì—ˆë‹¤

ğŸ”» ìˆ˜ë™ ë¹ˆ ë“±ë¡, ìë™ ë¹ˆ ë“±ë¡ ì˜¤ë¥˜ì‹œ ìŠ¤í”„ë§ ë¶€íŠ¸ ì—ëŸ¬

```
Consider renaming one of the beans or enabling overriding by setting 
spring.main.allow-bean-definition-overriding=true
```

- `CoreApplication` ì‹¤í–‰ì‹œ ìƒê¸°ëŠ” ì˜¤ë¥˜

## ë‹¤ì–‘í•œ ì˜ì¡´ê´€ê³„ ì£¼ì… ë°©ë²•
- ìƒì„±ì ì£¼ì…
- ìˆ˜ì •ì ì£¼ì…(setter ì£¼ì…)
- í•„ë“œ ì£¼ì…
- ì¼ë°˜ ë©”ì„œë“œ ì£¼ì…

### ìƒì„±ì ì£¼ì…
- ì´ë¦„ ê·¸ëŒ€ë¡œ ìƒì„±ìë¥¼ í†µí•´ì„œ ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì… ë°›ëŠ” ë°©ë²•ì´ë‹¤
- ì§€ê¸ˆê¹Œì§€ ì§„í–‰í–ˆë˜ ë°©ì‹ì´ ìƒì„±ì ì£¼ì…!
- íŠ¹ì§•
  - ìƒì„±ì í˜¸ì¶œì‹œì ì— ë”± 1ë²ˆë§Œ í˜¸ì¶œë˜ëŠ” ê²ƒì´ ë³´ì¥
    - ì´ë•Œ ê°’ì„ ì…‹íŒ…í•˜ê³  ì´í›„ì—ëŠ” ì…‹íŒ… ëª»í•˜ê²Œ ë§‰ì„ ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸
  - **ë¶ˆë³€, í•„ìˆ˜** ì˜ì¡´ê´€ê³„ì— ì‚¬ìš©

    <details>
      <summary>ì˜ˆì‹œì½”ë“œ</summary>

        @Component
        public class OrderServiceImpl implements OrderService {
        private final MemberRepository memberRepository;
        private final DiscountPolicy discountPolicy;

        @Autowired
        public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
            this.memberRepository = memberRepository;
            this.discountPolicy = discountPolicy;
           }
        }
      - ìƒì„±ìë¥¼ í†µí•´ì„œë§Œ ì˜ì¡´ì„±ì´ ì£¼ì…ëœë‹¤
      - ìƒì„±ìê°€ ìˆëŠ” ê²ƒì€ ì›¬ë§Œí•˜ë©´ ê°’ì„ ë‹¤ ë„£ì–´ì•¼ í•¨
        
    </details>
  
â­ì¤‘ìš”â­ ìƒì„±ìê°€ ë”± 1ê°œë§Œ ìˆìœ¼ë©´ @Autowiredë¥¼ ìƒëµí•´ë„ ìë™ ì£¼ì…ëœë‹¤.(ìŠ¤í”„ë§ ë¹ˆì—ë§Œ í•´ë‹¹) 

### ìˆ˜ì •ì ì£¼ì…(setter ì£¼ì…)

- setterë¼ ë¶ˆë¦¬ëŠ” í•„ë“œì˜ ê°’ì„ ë³€ê²½í•˜ëŠ” ìˆ˜ì •ì ë©”ì„œë“œë¥¼ í†µí•´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ë°©ë²•
  - íŠ¹ì§•
    - **ì„ íƒ, ë³€ê²½** ê°€ëŠ¥ì„±ì´ ìˆëŠ” ì˜ì¡´ê´€ê³„ì— ì‚¬ìš©
    - ìë°” ë¹ˆ í”„ë¡œí¼í‹° ê·œì•½ì˜ ìˆ˜ì •ì ë©”ì„œë“œ ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•

      <details>
        <summary>ì˜ˆì‹œì½”ë“œ</summary>

           @Component
           public class OrderServiceImpl implements OrderService {
           private MemberRepository memberRepository;
           private DiscountPolicy discountPolicy;
    
           @Autowired
           public void setMemberRepository(MemberRepository memberRepository) {
           this.memberRepository = memberRepository;
           }
    
           @Autowired
           public void setDiscountPolicy(DiscountPolicy discountPolicy) {
           this.discountPolicy = discountPolicy;
           }
          }
      - `@Autowired`ê°€ ì—†ìœ¼ë©´ ì˜ì¡´ ê´€ê³„ ì£¼ì… X

      </details>
> ğŸ’¡ ì°¸ê³ <br>- `@Autowired`ì˜ ê¸°ë³¸ ë™ì‘ì€ ì£¼ì…í•  ëŒ€ìƒì´ ì—†ìœ¼ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤
<br>- ì£¼ì…í•  ëŒ€ìƒì´ ì—†ì–´ë„ ë™ì‘í•˜ê²Œ í•˜ë ¤ë©´ `@Autowired(required = false)`ë¡œ ì§€ì •í•˜ë©´ ëœë‹¤.

> ğŸ’¡ ì°¸ê³ <br>- ìë°”ë¹ˆ í”„ë¡œí¼í‹°, ìë°”ì—ì„œëŠ” ê³¼ê±°ë¶€í„° í•„ë“œì˜ ê°’ì„ ì§ì ‘ ë³€ê²½í•˜ì§€ ì•Šê³ , setXxx, getXxx ë¼ëŠ” ë©”ì„œë“œë¥¼ í†µí•´ì„œ ê°’ì„ ì½ê±°ë‚˜ ìˆ˜ì •í•˜ëŠ” ê·œì¹™ì„ ë§Œë“¤ì—ˆëŠ”ë°, ê·¸ê²ƒì´ ìë°”ë¹ˆ í”„ë¡œí¼í‹° ê·œì•½

```java
 class Data {
 private int age;
 public void setAge(int age) {
 this.age = age;
  }
 public int getAge() {
 return age;
  }
 }
```

### í•„ë“œ ì£¼ì…

- ì´ë¦„ ê·¸ëŒ€ë¡œ í•„ë“œì— ë°”ë¡œ ì£¼ì…í•˜ëŠ” ë°©ë²•
- íŠ¹ì§•
  - ì½”ë“œê°€ ê°„ê²°í•´ì„œ ë§ì€ ê°œë°œìë“¤ì„ ìœ í˜¹í•˜ì§€ë§Œ **ì™¸ë¶€ì—ì„œ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥í•´ì„œ í…ŒìŠ¤íŠ¸í•˜ê¸° í˜ë“¤ë‹¤ëŠ” ì¹˜ëª…ì ì¸ ë‹¨ì **ì´ ì¡´ì¬
  - DI í”„ë ˆì„ì›Œí¬ê°€ ì—†ìœ¼ë©´ ì•„ë¬´ê²ƒë„ í•  ìˆ˜ ì—†ë‹¤
  - ì‚¬ìš©í•˜ì§€ë§ìâ€¦
    - ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤ì œ ì½”ë“œì™€ ê´€ê³„ì—†ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œ
    - ìŠ¤í”„ë§ ì„¤ì •ì„ ëª©ì ìœ¼ë¡œ í•˜ëŠ” `@Configuration` ê°™ì€ ê³³ì—ì„œë§Œ íŠ¹ë³„í•œ ìš©ë„ë¡œ ì‚¬ìš©

      <details>
        <summary>ì˜ˆì‹œì½”ë“œ</summary>

           @Component
           public class OrderServiceImpl implements OrderService {

           @Autowired
           private MemberRepository memberRepository;

           @Autowired
           private DiscountPolicy discountPolicy;

           }

      </details>

ğŸ’¡ ìœ„ì—ì„œ í•„ë“œ ì£¼ì… ë°©ì‹ì€ ì™¸ë¶€ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ì¹˜ëª…ì  ë‹¨ì ì´ ìˆë‹¤ê³  í–ˆë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ì•Œì•„ë³´ì
**OrderServiceTest.java**
```java
    @Test
    void fieldInjectionTest() {
        OrderServiceImpl orderService = new OrderServiceImpl();
        orderService.createOrder(1L, "itemA", 10000);
    }
```
- `java.lang.NullPointerException: Cannot invoke "hello.core.member.MemberRepository.findById(java.lang.Long)" because "this.memberRepository" is null`
- NullPointerException ì˜ˆì™¸ ë°œìƒ

ğŸ’¡ í•´ê²°í•˜ê¸° ìœ„í•´ OrderService.javaì— setterë¥¼ ì¶”ê°€í•´ì„œ ê°’ì„ ì£¼ì…í•´ì¤˜ì•¼ í•œë‹¤

<details>
<summary>OrderServiceImpl í´ë˜ìŠ¤ì—ì„œ setter ìƒì„±</summary>

    @Component
    public class OrderServiceImpl implements OrderService {

    public void setMemberRepository(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }

    public void setDiscountPolicy(DiscountPolicy discountPolicy) {
        this.discountPolicy = discountPolicy;
    }
    }
- ê²°êµ­ ìˆ˜ì •ìë¡œ ëŒì•„ì˜¨ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŒ

</details>

<details>
<summary>ë‹¤ì‹œ í…ŒìŠ¤íŠ¸ ì½”ë“œì™€ì„œ setì„ í†µí•´ ê°’ ì£¼ì…</summary>

    @Test
    void fieldInjectionTest() {
        OrderServiceImpl orderService = new OrderServiceImpl();
        orderService.createOrder(1L, "itemA", 10000);
        orderService.setMemberRepository(new MemoryMemberRepository());
        orderService.setDiscountPolicy(new FixDiscountPolicy());
    }

</details>

> ğŸ’¡ ì°¸ê³ <br>- ìˆœìˆ˜í•œ ìë°” í…ŒìŠ¤íŠ¸ ì½”ë“œì—ëŠ” ë‹¹ì—°íˆ @Autowired ê°€ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤
<br>- SpringBootTestì²˜ëŸ¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í…ŒìŠ¤íŠ¸ì— í†µí•©í•œ ê²½ìš°ì—ë§Œ ê°€ëŠ¥í•˜ë‹¤

> ğŸ’¡ ì°¸ê³ <br>- ë‹¤ìŒ ì½”ë“œì™€ ê°™ì´ @Beanì—ì„œ íŒŒë¼ë¯¸í„°ì— ì˜ì¡´ê´€ê³„ëŠ” ìë™ ì£¼ì…ëœë‹¤
```java
@Bean
OrderService orderService(MemberRepository memberRepoisitory, DiscountPolicy discountPolicy) {
		 return new OrderServiceImpl(memberRepository, discountPolicy);
}
```

### ì¼ë°˜ ë©”ì„œë“œ ì£¼ì…

- ì¼ë°˜ ë©”ì„œë“œë¥¼ í†µí•´ì„œ ì£¼ì… ë°›ì„ ìˆ˜ ìˆë‹¤
- íŠ¹ì§•
  - í•œë²ˆì— ì—¬ëŸ¬ í•„ë“œë¥¼ ì£¼ì… ë°›ì„ ìˆ˜ ìˆë‹¤
  - ì¼ë°˜ì ìœ¼ë¡œ ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤

<details>
<summary>ì˜ˆì‹œì½”ë“œ</summary>

	 @Component
	 public class OrderServiceImpl implements OrderService {
	 private MemberRepository memberRepository;
	 private DiscountPolicy discountPolicy;

	 @Autowired
	 public void init(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
	   this.memberRepository = memberRepository;
	   this.discountPolicy = discountPolicy;
	   }
	 }
- ìˆ˜ì •ì ì£¼ì…ê³¼ ë¹„ìŠ·

</details>

> ğŸ’¡ ì°¸ê³ <br>- ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ëŠ” ìŠ¤í”„ë§ ë¹ˆì´ì–´ì•¼ ë™ì‘í•œë‹¤
<br>- ìŠ¤í”„ë§ ë¹ˆì´ ì•„ë‹Œ Member ê°™ì€ í´ë˜ìŠ¤ì—ì„œ @Autowired ì½”ë“œë¥¼ ì ìš©í•´ë„ ì•„ë¬´ ê¸°ëŠ¥ë„ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤