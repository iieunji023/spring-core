## μƒλ΅μ΄ ν• μΈ μ •μ±… κ°λ°

```
- μ•…λ• κΈ°νμ: μ„λΉ„μ¤ μ¤ν” μ§μ „μ— ν• μΈ μ •μ±…μ„ μ§€κΈμ²λΌ κ³ μ • κΈμ•΅ ν• μΈμ΄ μ•„λ‹λΌ μΆ€ λ” ν•©λ¦¬μ μΈ μ£Όλ¬Έ κΈμ•΅λ‹Ή ν• μΈν•λ” **μ •λ¥ % ν• μΈ**μΌλ΅ λ³€κ²½ν•κ³  μ‹¶μ–΄μ”. μλ¥Ό λ“¤μ–΄μ„ κΈ°μ΅΄ μ •μ±…μ€ VIPκ°€ 10000μ›μ„ μ£Όλ¬Έν•λ“  20000μ›μ„ μ£Όλ¬Έν•λ“  ν•­μƒ 1000μ›μ„ ν• μΈν–λ”λ°, μ΄λ²μ— μƒλ΅ λ‚μ¨ μ •μ±…μ€ 10%λ΅ μ§€μ •ν•΄λ‘λ©΄ κ³ κ°μ΄ 10000μ› μ£Όλ¬Έμ‹ 1000μ›μ„ ν• μΈν•΄μ£Όκ³ , 20000μ› μ£Όλ¬Έμ‹μ— 2000μ›μ„ ν• μΈν•΄μ£Όλ” κ±°μ—μ”
- μμ§„ κ°λ°μ: μ κ°€ μ²μλ¶€ν„° κ³ μ • κΈμ•΅ ν• μΈμ€ μ•„λ‹λΌκ³  ν–μ–μ•„μ”.
- μ•…λ• κΈ°νμ: μ• μμΌ μ†ν”„νΈμ›¨μ–΄ κ°λ° μ„ μ–Έ λ°λΌμ”? β€κ³„νμ„ λ”°λ¥΄κΈ°λ³΄λ‹¤ λ³€ν™”μ— λ€μ‘ν•κΈ°λ¥Όβ€
- μμ§„ κ°λ°μ: β€¦ (ν•μ§€λ§ λ‚ μ μ—°ν• μ„¤κ³„κ°€ κ°€λ¥ν•λ„λ΅ κ°μ²΄μ§€ν–¥ μ„¤κ³„ μ›μΉ™μ„ μ¤€μν–μ§€ ν›„ν›„
```

> λ³€λ™λ ν• μΈ μ •μ±… μ½”λ“ μ¶”κ°€(RateDiscountPolicy)

### ν…μ¤νΈ μ½”λ“ μ¶”κ°€
- ctrl + shift + Tλ¥Ό ν†µν•΄ ν…μ¤νΈ ν΄λμ¤λ¥Ό κ°„νΈν•κ² μƒμ„±ν•  μ μμ

> ν…μ¤νΈ μ„±κ³µ μΌ€μ΄μ¤<br> VIP λ“±κΈ‰μΌ λ• ν• μΈ μ μ©
<br>

```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.*;

class RateDiscountPolicyTest {
    RateDiscountPolicy discountPolicy = new RateDiscountPolicy();

    @Test
    @DisplayName("VIPλ” 10% ν• μΈμ΄ μ μ©λμ–΄μ•Ό ν•λ‹¤.")
    void vip_o(){
        // given
        Member member = new Member(1L, "memberVIP", Grade.VIP);
        // when
        int discount = discountPolicy.discount(member, 10000);
        // then
        Assertions.assertThat(discount).isEqualTo(1000);
    }
}
```
<img src="https://github.com/iieunji023/spring-core/blob/main/images/ν• μΈμ •μ±…_ν…μ¤νΈ1.png" width="730">

π’΅ **μ„±κ³µ ν…μ¤νΈλ„ μ¤‘μ”ν•μ§€λ§, μ‹¤ν¨ ν…μ¤νΈλ„ λ§λ“¤μ–΄λ΄μ•Ό ν•λ‹¤.**

> ν…μ¤νΈ μ‹¤ν¨ μΌ€μ΄μ¤<br> BASIC λ“±κΈ‰μΌ λ• VIP λ“±κΈ‰κ³Ό λ™μΌν• ν• μΈμ •μ±… μ μ©
<br>

```java
@Test
@DisplayName("VIPκ°€ μ•„λ‹λ©΄ ν• μΈμ΄ μ μ©λμ§€ μ•μ•„μ•Ό ν•λ‹¤.")
void vip_x() {
    // given
    Member member = new Member(2L, "memberBASIC", Grade.BASIC);
    // when
    int discount = discountPolicy.discount(member, 10000);
    // then
    Assertions.assertThat(discount).isEqualTo(1000);
}
```
<img src="https://github.com/iieunji023/spring-core/blob/main/images/ν• μΈμ •μ±…_ν…μ¤νΈ2.png" width="730">

<br>

## μƒλ΅μ΄ ν• μΈ μ •μ±… μ μ©κ³Ό λ¬Έμ μ 

β οΈ λ°©κΈ μ¶”κ°€ν• ν• μΈ μ •μ±…(μ •λ¥ )μ„ μ• ν”λ¦¬μΌ€μ΄μ…μ— μ μ©ν•΄λ³΄λ©΄ ν΄λΌμ΄μ–ΈνΈμΈ `OrderServiceImpl` μ½”λ“λ¥Ό κ³ μ³μ•Ό ν•λ‹¤.
```java
package hello.core.order;


import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.discount.RateDiscountPolicy;
import hello.core.member.Member;
import hello.core.member.MemberRepository;
import hello.core.member.MemoryMemberRepository;

public class OrderServiceImpl implements OrderService {
    private final MemberRepository memberRepository = new MemoryMemberRepository();
//    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();

}

```
β οΈ λ¬Έμ μ  λ°κ²¬

- μ—­ν• κ³Ό κµ¬ν„μ„ μ¶©μ‹¤ν•κ² λ¶„λ¦¬ν•¨ β†’ OK
- λ‹¤ν•μ„±λ„ ν™μ©ν•κ³ , μΈν„°νμ΄μ¤μ™€ κµ¬ν„ κ°μ²΄λ¥Ό λ¶„λ¦¬ν•¨ β†’ OK
- OCP, DIP κ°™μ€ κ°μ²΄μ§€ν–¥ μ„¤κ³„ μ›μΉ™μ„ μ¶©λ¶„ν μ¤€μν–λ‹¤
    - κ·Έλ ‡κ² λ³΄μ΄μ§€λ§ μ§€ν‚¤μ§€ λ»ν•¨
- DIP: μ£Όλ¬Έμ„λΉ„μ¤ ν΄λΌμ΄μ–ΈνΈ(`OrderServiceImpl`)λ” `DisplayPolicy` μΈν„°νμ΄μ¤μ— μμ΅΄ν•λ©΄μ„ DIPλ¥Ό μ§€ν‚¨ κ²ƒ μ•„λ‹κ°€?
    - ν΄λμ¤ μμ΅΄ κ΄€κ³„λ¥Ό μƒκ°ν•΄λ³΄λ©΄ μ¶”μƒ(μΈν„°νμ΄μ¤)λΏλ§ μ•„λ‹λΌ **κµ¬μ²΄(κµ¬ν„) ν΄λμ¤μ—λ„ μμ΅΄**ν•κ³  μλ‹¤.
        - μ¶”μƒ(μΈν„°νμ΄μ¤) μμ΅΄: `DiscountPolicy`
        - κµ¬μ²΄(κµ¬ν„) ν΄λμ¤: `FixDiscountPolicy`, `RateDiscountPolicy`
- OCP: λ³€κ²½ν•μ§€ μ•κ³  ν™•μ¥ν•  μ μλ” κ²ƒ
    - **μ§€κΈ μ½”λ“λ” κΈ°λ¥μ„ ν™•μ¥ν•΄μ„ λ³€κ²½ν•λ©΄, ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ— μν–¥μ„ μ¤**
        - OCP μ„λ° !!

> κΈ°λ€ν–λ μμ΅΄κ΄€κ³„

<img src="https://github.com/iieunji023/spring-core/blob/main/images/μμ΅΄κ΄€κ³„1.png" width="730">

- μ§€κΈκΉμ§€ λ‹¨μν DiscountPolicy μΈν„°νμ΄μ¤λ§ μμ΅΄ν•λ‹¤κ³  μƒκ°

> μ‹¤μ  μμ΅΄κ΄€κ³„

<img src="https://github.com/iieunji023/spring-core/blob/main/images/μμ΅΄κ΄€κ³„2.png" width="730">

- ν΄λΌμ΄μ–ΈνΈμΈ `OrderServiceImpl`μ΄ `DiscountPolicy`μΈν„°νμ΄μ¤ λΏλ§ μ•„λ‹λΌ `FixDiscountPolicy`μΈ κµ¬ν„ ν΄λμ¤λ„ ν•¨κ» μμ΅΄ν•κ³  μμ

> μ •μ±… λ³€κ²½

<img src="https://github.com/iieunji023/spring-core/blob/main/images/μμ΅΄κ΄€κ³„3.png" width="730">

- β­ κ·Έλμ„ `FixDiscountPolicy`λ¥Ό `RateDiscountPolicy`λ΅ λ³€κ²½ν•λ” μκ°„ `OrderServiceImpl`μ μ†μ¤μ½”λ“λ„ ν•¨κ» λ³€κ²½ν•΄μ•Ό ν•λ‹¤.
- OCP μ„λ°

### λ¬Έμ  ν•΄κ²° λ°©λ²•
- λ¬Έμ  μƒν™©
    - ν΄λΌμ΄μ–ΈνΈ μ½”λ“μΈ `OrderServiceImpl`μ€ `DiscountPolicy`μ μΈν„°νμ΄μ¤ λΏλ§ μ•„λ‹λΌ κµ¬μ²΄ ν΄λμ¤λ„ ν•¨κ» μμ΅΄ν•λ‹¤
    - κ·Έλμ„ κµ¬μ²΄ ν΄λμ¤λ¥Ό λ³€κ²½ν•  λ• ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ„ ν•¨κ» λ³€κ²½ν•΄μ•Ό ν•λ‹¤
- ν•΄κ²°λ°©λ²•
    - **DIP μ„λ°** β†’ μ¶”μƒμ—λ§ μμ΅΄ν•λ„λ΅ λ³€κ²½(μΈν„°νμ΄μ¤μ—λ§ μμ΅΄)
    - DIPλ¥Ό μ„λ°ν•μ§€ μ•λ„λ΅ μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μμ΅΄ κ΄€κ³„λ¥Ό λ³€κ²½ν•λ©΄ λλ‹¤

> μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μ„¤κ³„λ¥Ό λ³€κ²½

<img src="https://github.com/iieunji023/spring-core/blob/main/images/μμ΅΄κ΄€κ³„4.png" width="730">

```java
 public class OrderServiceImpl implements OrderService {
 //private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
 private DiscountPolicy discountPolicy;
 }
```
- **μΈν„°νμ΄μ¤μ—λ§ μμ΅΄**ν•λ„λ΅ μ„¤κ³„μ™€ μ½”λ“λ¥Ό λ³€κ²½ν–λ‹¤.
- κ·Έλ°λ° κµ¬ν„μ²΄κ°€ μ—†λ”λ° μ–΄λ–»κ² μ½”λ“λ¥Ό μ‹¤ν–‰ν•  μ μμ„κΉ?
- μ΄μ „μ— λ§λ“¤μ—λ OderServiceTest μ‹¤ν–‰<br>
    <img src="https://github.com/iieunji023/spring-core/blob/main/images/ν…μ¤νΈκ²°κ³Ό.png" width="730">
    - μ‹¤μ  μ‹¤ν–‰μ„ ν•΄λ³΄λ©΄ NPE(null pointer exception)κ°€ λ°μƒν•λ‹¤
- ν•΄κ²°λ°©μ•
    - ν΄λΌμ΄μ–ΈνΈμΈ OrderServiceImplμ— DiscountPolicyμ κµ¬ν„ κ°μ²΄λ¥Ό λ€μ‹  μƒμ„±ν•κ³  μ£Όμ…ν•΄μ£Όμ–΄μ•Ό ν•¨
<br>

## κ΄€μ‹¬μ‚¬ λ¶„λ¦¬
### AppConfig λ“±μ¥

- μ• ν”λ¦¬μΌ€μ΄μ…μ μ „μ²΄ λ™μ‘ λ°©μ‹μ„ κµ¬μ„±(config)ν•κΈ° μ„ν•΄ **κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±**ν•κ³  **μ—°κ²°**ν•λ” μ±…μ„μ„ κ°€μ§€λ” λ³„λ„μ μ„¤μ • ν΄λμ¤λ¥Ό μƒμ„±
- AppConfigλ” μ• ν”λ¦¬μΌ€μ΄μ…μ μ‹¤μ  λ™μ‘μ— ν•„μ”ν• κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•λ‹¤
    - `MemberServiceImpl`
    - `MemoryMemberRepository`
    - `OrderServiceImpl`
    - `FixDiscountPolicy`
- AppConfigλ” μƒμ„±ν• κ°μ²΄ μΈμ¤ν„΄μ¤μ μ°Έμ΅°(λ νΌλ°μ¤)λ¥Ό μƒμ„±μλ¥Ό ν†µν•΄ μ£Όμ…(μ—°κ²°)ν•΄μ¤€λ‹¤.
    - `MemberServiceImpl` β†’ `MemoryMemberRepository`
    - `OrderServiceImpl` β†’ `MemoryMemberRepository` , `FixDiscountPolicy`

> MemberServiceImpl, OrderServiceImpl μ½”λ“ λ³€κ²½
- μ² μ €ν•κ² μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•κ² λ¨
- `OrderServiceImpl`μ κ²½μ° `DiscountPolicy` μΈν„°νμ΄μ¤κ°€ `FixedDiscountPolicy`, `RateDiscountPolicy`λ¥Ό λ„£μ–΄μ¤„μ§€λ” λ¨λ¦„

> ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨

<img src="https://github.com/iieunji023/spring-core/blob/main/images/ν΄λμ¤λ‹¤μ΄μ–΄κ·Έλ¨.png" width="730">

- κ°μ²΄μ μƒμ„±κ³Ό μ—°κ±Έμ€ AppConfigκ°€ λ‹΄λ‹Ή
- DIP μ™„μ„±: `MemberServiceImpl`μ€ `MemberRepository`μΈ μ¶”μƒμ—λ§ μμ΅΄ν•λ©΄ λ¨
- κ΄€μ‹¬μ‚¬μ λ¶„λ¦¬: κ°μ²΄λ¥Ό μƒμ„±ν•κ³  μ—°κ²°ν•λ” μ—­ν• κ³Ό μ‹¤ν–‰ν•λ” μ—­ν•  λ…ν™•ν λ¶„λ¦¬λ¨

> νμ› κ°μ²΄ μΈμ¤ν„΄μ¤ λ‹¤μ΄μ–΄κ·Έλ¨

<img src="https://github.com/iieunji023/spring-core/blob/main/images/νμ›_κ°μ²΄_λ‹¤μ΄μ–΄κ·Έλ¨.png" width="730">

- appConfig κ°μ²΄λ” `memoryMemberRepository` κ°μ²΄λ¥Ό μƒμ„±ν•κ³  κ·Έ μ°Έμ΅°κ°’μ„ `memberServiceImpl`μ„ μƒμ„±ν•λ©΄μ„ μƒμ„±μλ΅ μ „λ‹¬ν•λ‹¤
- ν΄λΌμ΄μ–ΈνΈμΈ `memberServiceImpl` μ…μ¥μ—μ„ λ³΄λ©΄ μμ΅΄κ΄€κ³„λ¥Ό λ§μΉ μ™Έλ¶€μ—μ„ μ£Όμ…ν•΄μ£Όλ” κ²ƒ κ°™λ‹¤κ³  ν•΄μ„ DI(Dependency Injection)μ΄λΌ ν•λ‹¤.


### ν…μ¤νΈ
> MemberApp, OrderApp μ½”λ“ λ³€κ²½
- AppConfigλ¥Ό ν†µν•΄ μƒμ„±μλ¥Ό μ£Όμ…λ°›μ

> MemberServiceTest, OrderServiceTest JUnit ν…μ¤νΈ μ½”λ“ λ³€κ²½
- ν…μ¤νΈ μ½”λ“μ—μ„ `@BeforeEach` λ” κ° ν…μ¤νΈλ¥Ό μ‹¤ν–‰ν•κΈ° μ „μ— νΈμ¶λ¨
  - AppConfigλ¥Ό λ°”λ΅ κΊΌλ‚΄μ¤κΈ° νλ“¤μ–΄μ„ @BeforeEachλ΅ κ°€μ Έμ¤κΈ°

### μ •λ¦¬
- AppConfigλ¥Ό ν†µν•΄ κ΄€μ‹¬μ‚¬λ¥Ό ν™•μ‹¤ν•κ² λ¶„λ¦¬ν•¨
- AppConfigλ” κ³µμ—° κΈ°νμ
- AppConfigλ” κµ¬μ²΄ ν΄λμ¤λ¥Ό μ„ νƒν•λ‹¤
  μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μ–΄λ–»κ² λ™μ‘ν•΄μ•Ό ν• μ§€ μ „μ²΄ κµ¬μ„±μ„ μ±…μ„μ§„λ‹¤
- `OrderServiceImpl` μ€ κΈ°λ¥μ„ μ‹¤ν–‰ν•λ” μ±…μ„λ§ μ§€λ©΄ λλ‹¤.
<br>

## AppConfig λ¦¬ν©ν„°λ§
- ν„μ¬ AppConfigλ¥Ό λ³΄λ©΄ **μ¤‘λ³µ**μ΄ μκ³  **μ—­ν• **μ— λ”°λ¥Έ **κµ¬ν„**μ΄ μ μ•λ³΄μΈλ‹¤.

#### λ¦¬ν©ν„°λ§ ν›„
- `new MemoryMemberRepository()` μ΄ λ¶€λ¶„ μ¤‘λ³µ μ κ±°
    - `MemoryMemberRepository`λ¥Ό λ‹¤λ¥Έ κµ¬ν„μ²΄λ΅ λ³€κ²½ν•  λ• ν• λ¶€λ¶„λ§ λ³€κ²½ν•λ©΄ λ¨
- `AppConfig`λ¥Ό λ³΄λ©΄ μ—­ν• κ³Ό κµ¬ν„ ν΄λμ¤κ°€ ν•λμ— λ“¤μ–΄μ΄
    - μ• ν”λ¦¬μΌ€μ΄μ… μ „μ²΄ κµ¬μ„±μ΄ μ–΄λ–»κ² λμ–΄μλ”μ§€ λΉ λ¥΄κ² νμ•…ν•  μ μμ
<br>

## μƒλ΅μ΄ κµ¬μ΅°μ™€ ν• μΈ μ •μ±… μ μ©

- μ •μ•΅ ν• μΈ μ •μ±…μ„ μ •λ¥  ν• μΈ μ •μ±…μΌλ΅ λ³€κ²½
- FixDiscountPolicy β†’ RateDiscountPolicy

π’΅ AppConfigμ λ“±μ¥μΌλ΅ μ• ν”λ¦¬μΌ€μ΄μ…μ΄ ν¬κ² **μ‚¬μ© μμ—­**κ³Ό κ°μ²΄λ¥Ό μƒμ„±ν•κ³  **κµ¬μ„±(Configuration)ν•λ” μμ—­**μΌλ΅ λ¶„λ¦¬

> μ‚¬μ©, κµ¬μ„±μ λ¶„λ¦¬

<img src="https://github.com/iieunji023/spring-core/blob/main/images/μ‚¬μ©_κµ¬μ„±1.png" width="730">

> ν• μΈ μ •μ±… λ³€κ²½

<img src="https://github.com/iieunji023/spring-core/blob/main/images/μ‚¬μ©_κµ¬μ„±2.png" width="730">

- `FixDiscountPolicy` β†’ `RateDiscountPolicy` λ΅ λ³€κ²½ν•΄λ„ κµ¬μ„± μμ—­λ§ μν–¥μ„ λ°›κ³ , μ‚¬μ© μμ—­μ€ μ „ν€ μν–¥μ„ λ°›μ§€ μ•λ”λ‹¤
- AppConfigλ§ μμ •ν•΄μ£Όλ©΄ λ¨

> AppConfing ν΄λμ¤ μ½”λ“ μμ •

- `discountPolicy()` λ©”μ„λ“λ§ μμ •ν•΄μ£Όλ©΄ λ¨
- AppConfigμ—μ„ ν• μΈ μ •μ±… μ—­ν• μ„ λ‹΄λ‹Ήν•λ” κµ¬ν„μ„ `FixDiscountPolicy` β†’ `RateDiscountPolicy` κ°μ²΄λ΅ λ³€κ²½
- μ΄μ  ν• μΈ μ •μ±…μ„ λ³€κ²½ν•΄λ„ μ• ν”λ¦¬μΌ€μ΄μ… **κµ¬μ„±μ„ λ‹΄λ‹Ή**ν•λ” AppConfigλ§ λ³€κ²½ν•λ©΄ λλ‹¤.
- ν΄λΌμ΄μ–ΈνΈ μ½”λ“ `OrderServiceImpl`λ¥Ό ν¬ν•¨ν•΄μ„ **μ‚¬μ© μμ—­**μ μ–΄λ–¤ μ½”λ“λ„ λ³€κ²½ν•  ν•„μ”κ°€ μ—†λ‹¤
- κµ¬μ„± μμ—­μ€ λ‹Ήμ—°ν λ³€κ²½λλ‹¤.(κ³µμ—° κΈ°νμ)
<br>

## μ „μ²΄ νλ¦„ μ •λ¦¬

- μƒλ΅μ΄ ν• μΈ μ •μ±… κ°λ°
- μƒλ΅μ΄ ν• μΈ μ •μ±… μ μ©κ³Ό λ¬Έμ μ 
- κ΄€μ‹¬μ‚¬ λ¶„λ¦¬
- AppConfig λ¦¬ν©ν„°λ§
- μƒλ΅μ΄ κµ¬μ΅°μ™€ ν• μΈ μ •μ±… μ μ©

> μƒλ΅μ΄ ν• μΈ μ •μ±… κ°λ°

- λ‹¤ν•μ„± λ•λ¶„μ— μƒλ΅μ΄ μ •λ¥  ν• μΈ μ •μ±… μ½”λ“λ¥Ό μ¶”κ°€λ΅ κ°λ°ν•λ” κ²ƒ μμ²΄λ” μ•„λ¬΄ λ¬Έμ κ°€ μ—†μ

> μƒλ΅μ΄ ν• μΈ μ •μ±… μ μ©κ³Ό λ¬Έμ μ 

- μƒλ΅ κ°λ°ν• μ •λ¥  ν• μΈ μ •μ±…μ„ μ μ©ν•λ ¤κ³  ν•λ‹ **ν΄λΌμ΄μ–ΈνΈ μ½”λ“**μΈ μ£Όλ¬Έ μ„λΉ„μ¤ κµ¬ν„μ²΄λ„ ν•¨κ» λ³€κ²½ν•΄μ•Όν•¨
- μ£Όλ¬Έ μ„λΉ„μ¤ ν΄λΌμ΄μ–ΈνΈκ°€ μΈν„°νμ΄μ¤μΈ `DiscountPolicy` λΏλ§ μ•„λ‹λΌ, κµ¬μ²΄ ν΄λμ¤μΈ `FixDiscountPolicy`λ„ ν•¨κ» μμ΅΄ β†’ **DIP μ„λ°**

> κ΄€μ‹¬μ‚¬μ λ¶„λ¦¬

- μ• ν”λ¦¬μΌ€μ΄μ…μ„ ν•λ‚μ κ³µμ—°μΌλ΅ μƒκ°
- κΈ°μ΅΄μ—λ” ν΄λΌμ΄μ–ΈνΈκ°€ μμ΅΄ν•λ” μ„λ²„ κµ¬ν„ κ°μ²΄λ¥Ό μ§μ ‘ μƒμ„±ν•κ³ , μ‹¤ν–‰ν•¨
- AppConfigλ” μ• ν”λ¦¬μΌ€μ΄μ…μ μ „μ²΄ λ™μ‘ λ°©μ‹μ„ κµ¬μ„±(config)ν•κΈ° μ„ν•΄, **κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±**ν•κ³ , **μ—°κ²°**ν•λ” μ±…μ„
- μ΄μ λ¶€ν„° ν΄λΌμ΄μ–ΈνΈ κ°μ²΄λ” μμ‹ μ μ—­ν• μ„ μ‹¤ν–‰ν•λ” κ²ƒλ§ μ§‘μ¤‘, κ¶ν•μ΄ μ¤„μ–΄λ“¦

> AppConfig λ¦¬ν©ν„°λ§

- κµ¬μƒ μ •λ³΄μ—μ„ μ—­ν• κ³Ό κµ¬ν„μ„ λ…ν™•ν•κ² λ¶„λ¦¬
- μ—­ν• μ΄ μ λ“λ¬λ‚¨
- μ¤‘λ³µ μ κ±°

> μƒλ΅μ΄ κµ¬μ΅°μ™€ ν• μΈ μ •μ±… μ μ©

- μ •μ•΅ ν• μΈ μ •μ±… β†’ μ •λ¥  ν• μΈ μ •μ±…μΌλ΅ λ³€κ²½
- AppConfigμ λ“±μ¥μΌλ΅ μ• ν”λ¦¬μΌ€μ΄μ…μ΄ ν¬κ² **μ‚¬μ© μμ—­**κ³Ό κ°μ²΄λ¥Ό μƒμ„±ν•κ³  **κµ¬μ„±(Configuration) ν•λ” μμ—­**μΌλ΅ λ¶„λ¦¬
- ν• μΈ μ •μ±…μ„ λ³€κ²½ν•΄λ„ AppConfigκ°€ μλ” κµ¬μ„± μμ—­λ§ λ³€κ²½ν•λ©΄ λ¨
- μ‚¬μ© μμ—­μ€ λ³€κ²½ν•  ν•„μ”μ—†μΌλ©° ν΄λΌμ΄μ–ΈνΈ μ½”λ“μΈ μ£Όλ¬Έ μ„λΉ„μ¤ μ½”λ“λ„ λ³€κ²½ν•μ§€ μ•μ
<br>

## μΆ‹μ€ κ°μ²΄ μ§€ν–¥ μ„¤κ³„μ 5κ°€μ§€ μ›μΉ™μ μ μ©

- μ—¬κΈ°μ„ SRP, DIP, OCP μ μ©

### SRP λ‹¨μΌ μ±…μ„ μ›μΉ™

> ν• ν΄λμ¤λ” ν•λ‚μ μ±…μ„λ§ κ°€μ Έμ•Ό ν•λ‹¤.
>
- ν΄λΌμ΄μ–ΈνΈ κ°μ²΄λ” μ§μ ‘ κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³ , μ—°κ²°ν•κ³ , μ‹¤ν–‰ν•λ” λ‹¤μ–‘ν• μ±…μ„μ„ κ°€μ§€κ³  μμ
- SRP λ‹¨μΌ μ±…μ„ μ›μΉ™μ„ λ”°λ¥΄λ©΄μ„ κ΄€μ‹¬μ‚¬λ¥Ό λ¶„λ¦¬ν•¨
- κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  μ—°κ²°ν•λ” μ±…μ„μ€ AppConfigκ°€ λ‹΄λ‹Ή
- ν΄λΌμ΄μ–ΈνΈ κ°μ²΄λ” μ‹¤ν–‰ν•λ” μ±…μ„λ§ λ‹΄λ‹Ή

### DIP μμ΅΄κ΄€κ³„ μ—­μ „ μ›μΉ™

> ν”„λ΅κ·Έλλ¨Έλ” β€μ¶”μƒν™”μ— μμ΅΄ν•΄μ•Όμ§€, κµ¬μ²΄ν™”μ— μμ΅΄ν•λ©΄ μ•λλ‹¤.β€ μμ΅΄μ„± μ£Όμ…μ€ μ΄ μ›μΉ™μ„ λ”°λ¥΄λ” λ°©λ²• μ¤‘ ν•λ‚λ‹¤.
>
- μƒλ΅μ΄ ν• μΈ μ •μ±…μ„ κ°λ°ν•κ³ , μ μ©ν•λ ¤κ³  ν•λ‹ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ„ ν•¨κ» λ³€κ²½ν•΄μ•Ό ν–λ‹¤. μ™λƒν•λ©΄ κΈ°μ΅΄ ν΄λΌμ΄μ–ΈνΈ μ½”λ“(`OrderServiceImpl`)λ” DIPλ¥Ό μ§€ν‚¤λ©° `DiscountPolicy` μ¶”μƒν™” μΈν„°νμ΄μ¤μ— μμ΅΄ν•λ” κ²ƒ κ°™μ•μ§€λ§, `FixDiscountPolicy` κµ¬μ²΄ν™” κµ¬ν„ ν΄λμ¤μ—λ„ ν•¨κ» μμ΅΄ν–λ‹¤.
- ν΄λΌμ΄μ–ΈνΈ μ½”λ“κ°€ `DiscountPolicy` μ¶”μƒν™” μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μ½”λ“λ¥Ό λ³€κ²½ν–λ‹¤
- ν•μ§€λ§ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ” μΈν„°νμ΄μ¤λ§μΌλ΅λ” μ•„λ¬΄κ²ƒλ„ μ‹¤ν–‰ν•  μ μ—†λ‹¤
- AppConfigκ°€ `FixDiscountPolicy` κ°μ²΄ μΈμ¤ν„΄μ¤λ¥Ό ν΄λΌμ΄μ–ΈνΈ μ½”λ“ λ€μ‹  μƒμ„±ν•΄μ„ ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ— μμ΅΄κ΄€κ³„λ¥Ό μ£Όμ…ν–λ‹¤.

### OCP

> μ†ν”„νΈμ›¨μ–΄ μ”μ†λ” ν™•μ¥μ—λ” μ—΄λ ¤ μμΌλ‚ λ³€κ²½μ—λ” λ‹«ν€ μμ–΄μ•Ό ν•λ‹¤
>
- λ‹¤ν•μ„± μ‚¬μ©ν•κ³  ν΄λΌμ΄μ–ΈνΈκ°€ DIPλ¥Ό μ§€ν‚΄
- μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ‚¬μ© μμ—­κ³Ό κµ¬μ„± μμ—­μΌλ΅ λ‚λ”
- AppConfigκ°€ μμ΅΄κ΄€κ³„λ¥Ό `FixDiscountPolicy` β†’ `RateDiscountPolicy`λ΅ λ³€κ²½ν•΄μ„ ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ— μ£Όμ…ν•λ―€λ΅ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ” λ³€κ²½ν•μ§€ μ•μ•„λ„ λ¨
- **μ†ν”„νΈμ›¨μ–΄ μ”μ†λ¥Ό μƒλ΅­κ² ν™•μ¥ν•΄λ„ μ‚¬μ© μμ—­μ λ³€κ²½μ€ λ‹«ν€ μλ‹¤!**
<br>

## IoC, DI, κ·Έλ¦¬κ³  μ»¨ν…μ΄λ„

### μ μ–΄μ μ—­μ „ IoC(Inversion of Control)

- κΈ°μ΅΄ ν”„λ΅κ·Έλ¨μ€ ν΄λΌμ΄μ–ΈνΈ κµ¬ν„ κ°μ²΄κ°€ μ¤μ¤λ΅ ν•„μ”ν• μ„λ²„ κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³ , μ—°κ²°ν•κ³ , μ‹¤ν–‰ν–λ‹¤
  - κµ¬ν„ κ°μ²΄κ°€ ν”„λ΅κ·Έλ¨μ μ μ–΄νλ¦„μ„ μ¤μ¤λ΅ μ΅°μΆ…ν–λ‹¤λ” μλ―Έ
- λ°λ©΄, AppConfigκ°€ λ“±μ¥ν• ν›„ κµ¬ν„ κ°μ²΄λ” μμ‹ μ λ΅μ§μ„ μ‹¤ν–‰ν•λ” μ—­ν• λ§ λ‹΄λ‹Ή
  - ν”„λ΅κ·Έλ¨μ μ μ–΄ νλ¦„μ€ AppConfigκ°€ λ‹΄λ‹Ή
  - ex) `OrderServiceImpl`μ€ ν•„μ”ν• μΈν„°νμ΄μ¤λ¥Ό νΈμ¶ν•μ§€λ§ μ–΄λ–¤ κµ¬ν„ κ°μ²΄λ“¤μ΄ μ‹¤ν–‰λ μ§€ λ¨λ¦„
- ν”„λ΅κ·Έλ¨μ— λ€ν• μ μ–΄ νλ¦„μ— λ€ν• κ¶ν•μ€ AppConfigκ°€ κ°€μ§€κ³  μλ‹¤.
  - `OrderServiceImpl` μƒμ„± λ“± `OrderService`μΈν„°νμ΄μ¤μ λ‹¤λ¥Έ κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  μ‹¤ν–‰ν•  μ μλ‹¤
  - λ”°λΌμ„, `OrderServiceImpl`μ€ λ΅μ§ μ‹¤ν–‰μ—λ§ μ§‘μ¤‘
- μ΄λ ‡κ² ν”„λ΅κ·Έλ¨μ μ μ–΄ νλ¦„μ„ μ§μ ‘ μ μ–΄ν•λ” κ²ƒμ΄ μ•„λ‹λΌ μ™Έλ¶€μ—μ„ κ΄€λ¦¬ν•λ” κ²ƒμ„ μ μ–΄μ μ—­μ „(IoC)λΌκ³  ν•λ‹¤.

### ν”„λ μ„μ›ν¬ vs λΌμ΄λΈλ¬λ¦¬

- ν”„λ μ„μ›ν¬κ°€ λ‚΄κ°€ μ‘μ„±ν• μ½”λ“λ¥Ό μ μ–΄ν•κ³ , λ€μ‹  μ‹¤ν–‰ν•λ©΄ κ·Έκ²ƒμ€ ν”„λ μ„μ›ν¬κ°€ λ§λ‹¤. (JUnit)
- λ°λ©΄μ— λ‚΄κ°€ μ‘μ„±ν• μ½”λ“κ°€ μ§μ ‘ μ μ–΄μ νλ¦„μ„ λ‹΄λ‹Ήν•λ‹¤λ©΄ κ·Έκ²ƒμ€ ν”„λ μ„μ›ν¬κ°€ μ•„λ‹λΌ λΌμ΄λΈλ¬λ¦¬λ‹¤

### μμ΅΄κ΄€κ³„ μ£Όμ… DI(Dependency Injection)

- `OrderServiceImpl`μ€ `DiscountPolicy` μΈν„°νμ΄μ¤μ— μμ΅΄
- μμ΅΄κ΄€κ³„λ” μ •μ μΈ ν΄λμ¤ μμ΅΄ κ΄€κ³„μ™€ μ‹¤ν–‰ μ‹μ μ— κ²°μ •λλ” λ™μ μΈ κ°μ²΄(μΈμ¤ν„΄μ¤) μμ΅΄ κ΄€κ³„ λ‘μ„ λ¶„λ¦¬ν•΄μ„ μƒκ°ν•΄μ•Ό ν•λ‹¤

> μ •μ μΈ ν΄λμ¤ μμ΅΄κ΄€κ³„

- ν΄λμ¤κ°€ μ‚¬μ©ν•λ” import μ½”λ“λ§ λ³΄κ³  μμ΅΄κ΄€κ³„λ¥Ό μ‰½κ² νλ‹¨ν•  μ μλ‹¤.
- μ •μ μΈ μμ΅΄κ΄€κ³„λ” μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ‹¤ν–‰ν•μ§€ μ•μ•„λ„ λ¶„μ„ν•  μ μλ‹¤.(ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨)
- `OrderServiceImpl`μ€ `MemberRepository`, `DiscountPolicy`μ— μμ΅΄ν•λ‹¤λ” κ²ƒμ„ μ• μ μλ‹¤.
- κ·Έλ¬λ‚ ν΄λμ¤ μμ΅΄κ΄€κ³„λ§μΌλ΅λ” μ‹¤μ  μ–΄λ–¤ κ°μ²΄κ°€ `OrderServiceImpl`μ— μ£Όμ…λ μ§€ μ• μ μ—†λ‹¤.
- ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨

  <img src="https://github.com/iieunji023/spring-core/blob/main/images/μ£Όλ¬Έλ„λ©”μΈ_ν΄λμ¤λ‹¤μ΄μ–΄κ·Έλ¨.png" width="730">

> λ™μ μΈ κ°μ²΄ μΈμ¤ν„΄μ¤ μμ΅΄ κ΄€κ³„

- μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰ μ‹μ μ— μ‹¤μ  μƒμ„±λ κ°μ²΄ μΈμ¤ν„΄μ¤μ μ°Έμ΅°κ°€ μ—°κ²°λ μμ΅΄κ΄€κ³„
- κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨

  <img src="https://github.com/iieunji023/spring-core/blob/main/images/μ£Όλ¬Έλ„λ©”μΈ_κ°μ²΄λ‹¤μ΄μ–΄κ·Έλ¨1.png" width="730">

<br>

## μ¤ν”„λ§μΌλ΅ μ „ν™ν•κΈ°
> AppConfig.class μ¤ν”„λ§ κΈ°λ°μΌλ΅ λ³€κ²½
- AppConfigμ— μ„¤μ •μ„ κµ¬μ„±ν•λ‹¤λ” λ»μ `@Configuration`μ„ λ¶™μ—¬μ¤€λ‹¤.
- κ° λ©”μ„λ“μ— `@Bean`μ„ λ¶™μ—¬μ¤€λ‹¤. μ΄λ ‡κ² ν•λ©΄ μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— μ¤ν”„λ§ λΉμΌλ΅ λ“±λ΅ν•λ‹¤.

> MemberApp.class, OrderApp.classμ— μ¤ν”„λ§ μ»¨ν…μ΄λ„ μ μ©

> μ¤ν”„λ§ μ»¨ν…μ΄λ„
- `ApplicationContext`λ¥Ό μ¤ν”„λ§ μ»¨ν…μ΄λ„λΌ ν•λ‹¤
- κΈ°μ΅΄μ—λ” κ°λ°μκ°€ `AppConfig`λ¥Ό μ‚¬μ©ν•΄μ„ μ§μ ‘ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  DIλ¥Ό ν–μ§€λ§, μ΄μ λ¶€ν„°λ” μ¤ν”„λ§ μ»¨ν…μ΄λ„λ¥Ό ν†µν•΄μ„ μ‚¬μ©ν•λ‹¤
- μ¤ν”„λ§ μ»¨ν…μ΄λ„λ” `@Configuration`μ΄ λ¶™μ€ `AppConfig`λ¥Ό μ„¤μ •(κµ¬μ„±) μ •λ³΄λ΅ μ‚¬μ©ν•λ‹¤.
- μ—¬κΈ°μ„ `@Bean`μ΄λΌ μ ν λ©”μ„λ“λ“¤ λ¨λ‘ νΈμ¶ν•΄μ„ λ°ν™λ κ°μ²΄λ¥Ό μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— λ“±λ΅ν•λ‹¤
- μ΄λ ‡κ² μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— λ“±λ΅λ κ°μ²΄λ¥Ό μ¤ν”„λ§ λΉμ΄λΌ ν•λ‹¤
- μ¤ν”„λ§ λΉμ€ `@Bean`μ΄ λ¶™μ€ λ©”μ„λ“λ…μ„ μ¤ν”„λ§ λΉμ μ΄λ¦„μΌλ΅ μ‚¬μ©ν•λ‹¤

  (`memberService`, `orderService`)

- μ΄μ „μ—λ” κ°λ°μκ°€ ν•„μ”ν• κ°μ²΄λ¥Ό `AppConfig`λ¥Ό μ‚¬μ©ν•΄μ„ μ§μ ‘ μ΅°νν–μ§€λ§, μ΄μ λ¶€ν„°λ” μ¤ν”„λ§ μ»¨ν…μ΄λ„λ¥Ό ν†µν•΄ ν•„μ”ν• μ¤ν”„λ§ λΉ(κ°μ²΄)μ„ μ°Ύμ•„μ•Ό ν•λ‹¤
- μ¤ν”„λ§ λΉμ€ `applicationContext.getBean()` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•΄μ„ μ°Ύμ„ μ μλ‹¤
- κΈ°μ΅΄μ—λ” κ°λ°μκ°€ μ§μ ‘ μλ°”μ½”λ“λ΅ λ¨λ“  κ²ƒμ„ ν–λ‹¤λ©΄ μ΄μ λ¶€ν„°λ” μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— κ°μ²΄λ¥Ό μ¤ν”„λ§ λΉμΌλ΅ λ“±λ΅ν•κ³ , μ¤ν”„λ§ μ»¨ν…μ΄λ„μ—μ„ μ¤ν”„λ§ λΉμ„ μ°Ύμ•„μ„ μ‚¬μ©ν•λ„λ΅ λ³€κ²½λμ—λ‹¤.